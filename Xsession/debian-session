#!/bin/bash
hostctl-daemon &
get(){
    iniparser ~/.config/debxdg.conf "Main" "$1"
}
source /usr/lib/sulin/dsl/variable.sh
if [[ "$(get x-session-manager)" != "" ]] ; then
    if [[ $(get x-session-manager) == "d-term" ]] ; then
        /usr/lib/sulin/dsl/d-term "pkexec /usr/lib/sulin/dsl/dsl.sh"
    fi
    exec pkexec /usr/lib/sulin/dsl/dsl.sh <<< "$(get x-session-manager)"
elif ls ${DESTDIR}/etc/alternatives/x-session-manager &>/dev/null ; then
    exec pkexec /usr/lib/sulin/dsl/dsl.sh <<< /etc/X11/Xsession
elif [[ -f /usr/lib/sulin/dsl/d-term ]] ; then
    exec /usr/lib/sulin/dsl/d-term "pkexec /usr/lib/sulin/dsl/dsl.sh"
else
    exec xterm -e "pkexec /usr/lib/sulin/dsl/dsl.sh"
fi
