#!/bin/bash
get(){
    iniparser ~/.config/debxdg.conf "Main" "$1"
}
source /usr/lib/sulin/dsl/variable.sh
pactl load-module module-native-protocol-tcp auth-ip-acl=127.0.0.1 || true
if [[ "$(get x-session-manager)" != "" ]] ; then
    if [[ $(get x-session-manager) == "d-term" ]] ; then
        /usr/lib/sulin/dsl/d-term "$(get_root) /usr/lib/sulin/dsl/dsl.sh"
    fi
    exec $(get_root) /usr/lib/sulin/dsl/dsl.sh <<< "$(get x-session-manager)"
elif ls ${DESTDIR}/etc/alternatives/x-session-manager &>/dev/null ; then
    $(get_root) /usr/lib/sulin/dsl/dsl.sh <<< /etc/X11/Xsession
elif [[ -f /usr/lib/sulin/dsl/d-term ]] ; then
    /usr/lib/sulin/dsl/d-term "$(get_root) /usr/lib/sulin/dsl/dsl.sh"
else
    xterm -e "$(get_root) /usr/lib/sulin/dsl/dsl.sh"
fi
